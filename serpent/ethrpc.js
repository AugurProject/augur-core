/**
 * Send JSON-RPC commands to Ethereum from the safety and convenience of
 * your browser!
 *
 * Examples:
 *   EthRPC.eth("blockNumber");
 *   EthRPC.net("peerCount");
 * 
 * @author Jack Peterson (jack@augur.net)
 * @date 4/12/2015
 * @license MIT
 */

var rpc = { host: "127.0.0.1", port: 8545 };

var EthRPC = (function (rpc_url) {

    // post json-rpc command to ethereum client
    function json_rpc(command, callback) {
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function () {
            if (xhr.readyState == 4) {
                var res = JSON.parse(xhr.responseText);
                if (res.error) {
                    console.error(
                        "[" + res.error.code + "]",
                        res.error.message
                    );
                } else {
                    if (res.result && callback) {
                        callback(res);
                    } else if (res.result) {
                        console.log(res.result);
                    } else {
                        console.log(res);
                    }
                }
            }
        }
        xhr.open("POST", rpc_url, false);
        xhr.setRequestHeader("Content-type", "application/json");
        xhr.send(JSON.stringify(command));
    }

    function postdata(command, params, prefix) {
        data = {
            id: 1,
            jsonrpc: "2.0",
            method: (prefix || "eth_") + command.toString()
        };
        if (params) {
            if (params.constructor === Array) {
                data.params = params;
            } else {
                data.params = [params];
            }
        } else {
            data.params = null;
        }
        return data;
    }

    return {
        eth: function (command, params, f) {
            json_rpc(postdata(command, params), f);
        },
        net: function (command, params, f) {
            json_rpc(postdata(command, params, "net_"), f);
        },
        web3: function (command, params, f) {
            json_rpc(postdata(command, params, "web3_"), f);
        },
        db: function (command, params, f) {
            json_rpc(postdata(command, params, "db_"), f);
        },
        shh: function (command, params, f) {
            json_rpc(postdata(command, params, "shh_"), f);
        },
        sha3: function (data, f) {
            if (data) {
                if (data.constructor === Array || data.constructor === Object) {
                    data = JSON.stringify(data);
                }
                json_rpc(postdata("sha3", data.toString(), "web3_"), function (data) {
                    console.log(data.result.slice(0, 10), "(" + data.result + ")");
                    if (f) f(data.result);
                });
            }
        },
        blockNumber: function (f) {
            json_rpc(postdata("blockNumber"), function (data) {
                var blocknum = parseInt(data.result, 16);
                console.log(blocknum, "(" + data.result + ")");
                if (f) f(blocknum);
            });
        },
        getCode: function (address, block, f) {
            if (address) {
                json_rpc(postdata("getCode", [address, block || "latest"]), f);
            }
        },
        getBalance: function (address, block, f) {
            json_rpc(postdata("getBalance", [address, block || "latest"]), f || function (data) {
                var bal = parseInt(data.result, 16);
                console.log(bal / 1e16, "(" + bal.toString() + ")");
                if (f) f(bal);
            });
        },
        sendTransaction: function (tx, f) {
            tx.to = tx.to || "";
            tx.gas = (tx.gas) ? "0x" + tx.gas.toString(16) : "0x989680";
            json_rpc(postdata("sendTransaction", tx), f);
        },
        getTransactionByHash: function (hash, f) {
            json_rpc(postdata("getTransactionByHash", hash), f);
        },
        hash: function (data, f) { this.sha3(data, f); },
        balance: function (address, block, f) { this.getBalance(address, block, f); },
        sendTx: function (tx, f) { this.sendTransaction(tx, f); },
        getTx: function (hash, f) { this.getTransactionByHash(hash, f); }
    };
})("http://" + rpc.host.toString() + ":" + rpc.port.toString());

// broadcast contracts
function broadcast(from, compiled, gas) {
    for (c in compiled) {
        if (!compiled.hasOwnProperty(c)) continue;
        console.info("Broadcasting", c, "with", gas, "gas");
        EthRPC.sendTransaction({from: from, data: compiled[c], gas: gas});
    }
}

// check if contracts are accessible
function ping(addr) {
    for (a in addr) {
        if (!addr.hasOwnProperty(a)) continue;
        EthRPC.getCode(addr[a]);
    }
}

function pp(o) { console.log(JSON.stringify(o, null, 2)); }

function test_ethrpc(addr, contracts, gas) {
    EthRPC.balance(addr.jack);
    EthRPC.eth("accounts");
    EthRPC.eth("blockNumber");
    EthRPC.web3("sha3", "wheethereum");
    EthRPC.net("peerCount");
    EthRPC.db("putString", [ "testDB", "myKey", "myString" ]);
    EthRPC.db("getString", [ "testDB", "myKey" ]);
    EthRPC.shh("version");
    EthRPC.sha3(contracts.signature.cash[2])
    EthRPC.sendTx({from: addr.jack, data: contracts.compiled.mul2, gas: gas});
    EthRPC.sendTx({from: addr.jack, to: addr.cash, data: "0xc5d24601", gas: gas});
    EthRPC.eth(
        "getTransactionByHash",
        ["0xf1699079b4408caf18068cd546b95006428e0cfa89ef11dd4b349073042f8267", "pending"]
    );
}

// lots of gas
var gas = 100000000;

// frontier testnet addresses
// info: "0xe9d61cfdc67115372a78578b3d1082e8911419d9",
// cash: "0x5c90e13b3cdfb498945f10b60b140259e06a2651",
var addr = {
    loopy: "0x00e3f8de3ed9d428dc235ce0c25bc1136073be8b",
    jack: "0x63524e3fe4791aefce1e932bbfb3fdf375bfad89",
    ten: "0x3caf506cf3d5bb16ba2c8f89a6591c5160d69cf3",
    mul2: "0x88cae18facdaa0f3d0839d3f8a8874f2fa8c54cf",
    info: "0x84ad0e89dbbbdfb18a59954addf10ad501525a01",
    cash: "0x559b098076d35ddc7f5057bf28eb20d9cf183a99",
    interpolate: "0x13aad6f5573db896e589d2fdef22da8c5033141d",
    center: "0x63faff743ab0398524c08a435f94ceb91352ba58",
    score: "0x24c47de8ce8f9bca800c3b428a499fb5b0bcaa09",
    adjust: "0x3e79ddefd9406c913a74373eb65df6c0eaea98c1",
    resolve: "0xd7a973f0f38a065a3c5a3e3d3f02ac80685f08a0",
    payout: "0x7313f08f324b1b2ce54413a20677b3a43a27522f"
};
// var addr = {
//     jack: "0x63524e3fe4791aefce1e932bbfb3fdf375bfad89",
//     ten: "0x5c90e13b3cdfb498945f10b60b140259e06a2651",
//     mul2: "0x24c47de8ce8f9bca800c3b428a499fb5b0bcaa09",
//     info: "0x84ad0e89dbbbdfb18a59954addf10ad501525a01",
//     cash: "0x559b098076d35ddc7f5057bf28eb20d9cf183a99",
//     interpolate: "0x13aad6f5573db896e589d2fdef22da8c5033141d",
//     center: "0xe9d61cfdc67115372a78578b3d1082e8911419d9",
//     score: "0x5c90e13b3cdfb498945f10b60b140259e06a2651",
//     adjust: "0xa59e9d9b48f462135f7e971ab370d3e156fd3b37",
//     resolve: "0x63faff743ab0398524c08a435f94ceb91352ba58",
//     payout: "0x88cae18facdaa0f3d0839d3f8a8874f2fa8c54cf"
// };

var contracts = {
    compiled: {
        ten: "0x603980600b6000396044567c01000000000000000000000000000000000000000000000000000000006000350463643ceff9811415603757600a60405260206040f35b505b6000f3",
        mul2: "0x604380600b600039604e567c010000000000000000000000000000000000000000000000000000000060003504636ffa1caa81141560415760043560405260026040510260605260206060f35b505b6000f3",
        info: "0x60006104ff537c0100000000000000000000000000000000000000000000000000000000600035046337e7ee008114156100fb5760043560405260606060599059016000905260018152604051816020015260018160400152809050205460605260806080599059016000905260018152604051816020015260008160400152600081606001528090502060605180806020015990590160009052818152602081019050905060005b602083048112156100c95780840154816020028301526001810190506100a8565b602083066020036101000a600003818501541681602002830152819050905090509050602081035160200160208203f3505b63618fb68d81141561013c576004356040526060606059905901600090526001815260405181602001526001816040015280905020546101a05260206101a0f35b63823edd5781141561017d576004356040526060606059905901600090526001815260405181602001526002816040015280905020546101e05260206101e0f35b6380ab639c8114156101be57600435604052606060605990590160009052600181526040518160200152600381604001528090502054610220526020610220f35b63ab363d418114156103ad57602435604052604435610260526064356102805260846004358080602001599059016000905281815260208101905090506102a05280826102a051378082019150505060005990590160009052601c6064599059016000905201639943d669601c8203523360048201526024810160206103606024846000600054602d5a03f15061036051905090509050151561026b576001600003610380526020610380f35b6000606060605990590160009052600181526040518160200152600281604001528090502054141561039f5760806080599059016000905260018152604051816020015260008160400152600081606001528090502060206102a05103516020810460005b818112156102f157806020026102a0510151848201556001810190506102d0565b602083066020036101000a600003816020026102a051015116848201555050505060206102a0510351606060605990590160009052600181526040518160200152600181604001528090502055610280516060606059905901600090526001815260405181602001526003816040015280905020556102605160606060599059016000905260018152604051816020015260028160400152809050205560016104c05260206104c0f36103ac565b60006104e05260206104e0f35b5b50",
        cash: "0x60006104bf537c01000000000000000000000000000000000000000000000000000000006000350463de5f72fd81141561006a573260405269271000000000000000006040604059905901600090526001815260405181602001528090502055600160805260206080f35b638357984f8114156100a25760043560a0526040604059905901600090526001815260a0518160200152809050205460c052602060c0f35b63693200ce81141561019157600435610100526024356101205232604052604060405990590160009052600181526040518160200152809050205461014052610120516101405112151561018357610120516040604059905901600090526001815260405181602001528090502054036040604059905901600090526001815260405181602001528090502055610120516040604059905901600090526001815261010051816020015280905020540160406040599059016000905260018152610100518160200152809050205561012051610200526020610200f3610190565b6000610220526020610220f35b5b6380b97fc081141561029f5760043561010052602435610120526044356102405232610240511415156101cb576000610260526020610260f35b604060405990590160009052600181526102405181602001528090502054610140526101205161014051121515610291576101205160406040599059016000905260018152610240518160200152809050205403604060405990590160009052600181526102405181602001528090502055610120516040604059905901600090526001815261010051816020015280905020540160406040599059016000905260018152610100518160200152809050205561012051610320526020610320f361029e565b6000610340526020610340f35b5b634c764abc81141561035957600435610360526024356103805260005990590160009052601c6064599059016000905201639943d669601c8203523360048201526024810160206103c06024846000600054602d5a03f1506103c05190509050905015156103175760016000036103e05260206103e0f35b61038051604060405990590160009052600181526103605181602001528090502054036040604059905901600090526001815261036051816020015280905020555b63a92c9b8381141561041357600435610360526024356103805260005990590160009052601c6064599059016000905201639943d669601c8203523360048201526024810160206104406024846000600054602d5a03f1506104405190509050905015156103d1576001600003610460526020610460f35b61038051604060405990590160009052600181526103605181602001528090502054016040604059905901600090526001815261036051816020015280905020555b50",
        interpolate: "0x610a218061000e600039610a2f566000610c1f537c010000000000000000000000000000000000000000000000000000000060003504630d2de9d1811415610a1f5760a460043580806020026020015990590160009052818152602081019050905060405280602002826040513780602002820191505060243580806020026020015990590160009052818152602081019050905060e052806020028260e0513780602002820191505060443580806020026020015990590160009052818152602081019050905061014052806020028261014051378060200282019150506064358080602002602001599059016000905281815260208101905090506101a05280602002826101a05137806020028201915050608435808060200260200159905901600090528181526020810190509050610200528060200282610200513780602002820191505050602060e0510351600060005b8281121561019c5760008160200260e05101511215610171578060200260e051015160000361017b565b8060200260e05101515b8160200260e05101528060200260e051015182019150600181019050610147565b82806020026020015990590160009052818152602081019050905060005b848112156101ea5783680100000000000000008260200260e05101510205816020028301526001810190506101ba565b819050905090509050905060e052602060e0510351602060405103518060020282820582806020026020015990590160009052818152602081019050905060005b828112156102e35760005b868112156102d75783810282016104005181602002604051015114156102665761040051816020028501526102cb565b60018360200261014051015114156102b95782602002610200510151836020026101a0510151036801000000000000000084602002610200510151836020026040510151030205816020028501526102ca565b806020026040510151816020028501525b5b50600181019050610236565b5060018101905061022b565b50828060200260200159905901600090528181526020810190509050600060005b868112156103575761040051816020026040510151141561033d576801000000000000000087820160200284015260018201915061034c565b80602002840151816020028401525b600181019050610304565b5080156109dd5783806020026020015990590160009052818152602081019050905060005b858112156103d05760005b898112156103c457610400518a8202830160200260405101511415156103b95760018260200284015101826020028401525b600181019050610387565b5060018101905061037c565b5060005b858112156109d657888160200283015112156109cb576000816020028301518060200260200159905901600090528181526020810190509050826020028401518060200260200159905901600090528181526020810190509050836020028501518c0380602002602001599059016000905281815260208101905090506000600060005b8f8112156104c7578f8102880161040051816020028e015114156104895780846020028601526001840193506104bb565b8160200260e0510151880197508160200260e051015183602002880152806020028d0151836020028701526001830192505b50600181019050610458565b505050600060008660200261014051015114156105875760005b86602002880151811215610533578568010000000000000000826020028701510205816020028601526801000000000000000081602002850151826020028701510205820191506001810190506104e1565b50680166666666666666678112156105545768010000000000000000610580565b68019999999999999999811315610574576802000000000000000061057f565b680180000000000000005b5b9050610998565b60005b866020028801518112156105be5785680100000000000000008260200287015102058160200286015260018101905061058a565b506020830351600060026020870351600060005b828112156105f057806020028a0151820191506001810190506105d2565b819050905090500560005b896020028b0151811215610678578181602002890151131561066d5760208803518851600060015b838112156106535782816020028d0151131561064857806020028c01516107e0528091505b600181019050610623565b819050905090509050806020028801516108205250600192505b6001810190506105fb565b50600082141561098b5760208603516020880351602088035101806020026020015990590160009052818152602081019050905060206020890351028082828b60006004600a8705601201f16106ca57fe5b50602060208a03510280602060208b0351028301828c60006004600a8705601201f16106f257fe5b5080905081806020026020015990590160009052818152602081019050905060006000600060006000600060008752600189036020880152600195505b60008612151561087d578560200287015194506001860360200287015193506002860395508460200288015192506001840391508390505b60018503811315156107d85782816020028901511315156107cd576001820191508160200288015181602002890151836020028a015280826020028a0152508882016020028801518982016020028901518a84016020028a0152808a83016020028a0152505b600181019050610767565b6001820160200288015185602002890151600184016020028a015280866020028a01525060018983010160200288015189860160200289015160018b8501016020028a0152808a87016020028a0152508382131561084d57836001870160200288015281600287016020028801526002860195505b8460028301121561087857600282016001870160200288015284600287016020028801526002860195505b61072f565b8790509050905090509050905090509050905083806020026020015990590160009052818152602081019050905084806020026020015990590160009052818152602081019050905060005b868112156108fa578060200284015181602002840152868101602002840151816020028301526001810190506108c9565b50600060005b8582131515610922576001810190506001810360200283015182019150610900565b600181036020028301518203915063011979986000878403121561094b5786830360000361094f565b8683035b12156109765760026001820360200285015160028303602002860151010561082052610985565b60018103602002840151610820525b50505050505b6108205190509050905090505b60005b866020028801518f038112156109c45781816020028401516020028b015260018101905061099b565b5050505050505b6001810190506103d4565b5050610a03565b60005b86811215610a015780602002840151816020028401526001810190506109e0565b505b848060208403526020602087020160208403f350505050505050505b505b6000f3",
        center: "0x6105618061000e60003961056f5660006106bf537c010000000000000000000000000000000000000000000000000000000060003504634ec068388114156102b65760a43560405260c43560605260e4600435808060200260200159905901600090528181526020810190509050608052806020028260805137806020028201915050602435808060200260200159905901600090528181526020810190509050610120528060200282610120513780602002820191505060443580806020026020015990590160009052818152602081019050905061018052806020028261018051378060200282019150506064358080602002602001599059016000905281815260208101905090506101e05280602002826101e05137806020028201915050608435808060200260200159905901600090528181526020810190509050610240528060200282610240513780602002820191505050602061012051035160206080510351818105808060200260200159905901600090528181526020810190509050600060005b858112156101da5760005b848112156101c057808583020160200260805101518260200261012051015102816020028501510181602002850152600181019050610186565b50806020026101205101518201915060018101905061017b565b60005b8481121561020057828160200285015105816020028501526001810190506101dd565b5060028486010180806020026020015990590160009052818152602081019050905060005b87811215610252578681076020028601518160200260805101510381602002830152600181019050610225565b68010000000000000000816020028301526040516002840360200283015286606051121561028c5760605160018403602002830152610298565b86600184036020028301525b828060208403526020602085020160208403f3505050505050505050505b6330b1a37c811415610376576024356102a05260446004358080602002602001599059016000905281815260208101905090506101205280602002826101205137806020028201915050506102a051806020026020015990590160009052818152602081019050905060005b6102a0518112156103595768010000000000000000620f424082602002610120510151020281602002830152600181019050610322565b6102a051806020840352602060206102a051020160208403f35050505b63d19da6b881141561055f576044356102a0526064356102e052608460043580806020026020015990590160009052818152602081019050905061042052806020028261042051378060200282019150506024358080602002602001599059016000905281815260208101905090506104e05280602002826104e05137806020028201915050506102e05180602002602001599059016000905281815260208101905090506102a051806020026020015990590160009052818152602081019050905060005b6102a05181121561047e5768010000000000000000816020026104e05101516102e051830260200261042051015102058160200283015260018101905061043c565b5060206104e0510351600060005b828112156104ad57806020026104e05101518201915060018101905061048c565b8190509050905060005b6102e0518112156105405760005b6102a05181121561050e5768010000000000000000826102e0518302016020026104205101518260200286015102058260200286015101826020028601526001810190506104c5565b5068010000000000000000820368010000000000000000826020028601510205816020028501526001810190506104b7565b6102e051806020860352602060206102e051020160208603f350505050505b505b6000f3",
        score: "0x6107fe8061000e60003961080c5660006108bf537c010000000000000000000000000000000000000000000000000000000060003504632f300bee8114156100a757600435604052602435606052604435608052600260805101808060200260200159905901600090528181526020810190509050680100000000000000008152606051608051602002820152600160405103600160805101602002820152818060208303526020602084020160208303f35050505b63a647a5b981141561032d576064356101405260843560805260a460043580806020026020015990590160009052818152602081019050905061010052806020028261010051378060200282019150506024358080602002602001599059016000905281815260208101905090506101e05280602002826101e05137806020028201915050604435808060200260200159905901600090528181526020810190509050610240528060200282610240513780602002820191505050602061010051035180806020026020015990590160009052818152602081019050905060005b6101405181121561023f57600060005b6080518112156101cc5780602002610100510151816080518502016020026101e05101510282019150600181019050610198565b50680100000000000000008105905060005b6080518112156102325770010000000000000000000000000000000083602002610240510151826080518602016020026101e0510151840202058160200285015103816020028501526001810190506101de565b5050600181019050610188565b50600060005b60805181121561026d5780602002830151816020028401510282019150600181019050610245565b5068010000000000000000810590506002810560005b600b8112156102ac57600282680100000000000000008502058301059150600181019050610283565b5060005b6080518112156102e0578168010000000000000000826020028601510205816020028501526001810190506102b0565b505050600160805160200261010051015103608051602002820152600160805101602002610100510151600160805101602002820152818060208303526020602084020160208303f35050505b635b1802298114156104245760443560805260646004358080602002602001599059016000905281815260208101905090506103c05280602002826103c05137806020028201915050602435808060200260200159905901600090528181526020810190509050610420528060200282610420513780602002820191505050600060005b6080518112156103ea576801000000000000000081602002610420510151826020026103c05101510205820191506001810190506103b1565b60006104205151141515610411576104205151680100000000000000008302059150610416565b600091505b816104c05260206104c0f350505b63f4ca7dc481141561065d576044356101405260643560805260846004358080602002602001599059016000905281815260208101905090506104e05280602002826104e05137806020028201915050602435808060200260200159905901600090528181526020810190509050610540528060200282610540513780602002820191505050602061054051035160026080510a806020026020015990590160009052818152602081019050905060005b60805181121561053e5760005b6080518112156105325768010000000000000000816020026104e0510151836020026104e051015102058160805184020160200284015101816080518402016020028401526001810190506104e2565b506001810190506104d5565b81905090508180602002602001599059016000905281815260208101905090506080516101405102806020026020015990590160009052818152602081019050905060005b6101405181121561060f5760005b6080518112156106035760005b6080518112156105f757680100000000000000008260805183020160200287015182608051860201602002610540510151020582608051850201602002850151018260805185020160200285015260018101905061059e565b50600181019050610591565b50600181019050610583565b819050905060005b848112156106435780602002820151816020026105405101510381602002840152600181019050610617565b50838060208403526020602086020160208403f350505050505b63232b27348114156107fc576064356107c0526084356101405260a43560805260c46004358080602002602001599059016000905281815260208101905090506107e05280602002826107e05137806020028201915050602435808060200260200159905901600090528181526020810190509050610360528060200282610360513780602002820191505060443580806020026020015990590160009052818152602081019050905061054052806020028261054051378060200282019150505060006103605151121561075d5760005b60805181121561075b57806020026103605101516000038160200261036051015260018101905061072f565b505b60005b610140518112156107da5760005b6080518112156107ce576801000000000000000068010000000000000000826020026103605101516107c0510205826080518502016020026105405101510205826020026107e051015101826020026107e051015260018101905061076e565b50600181019050610760565b610140518060206107e05103526020602061014051020160206107e05103f350505b505b6000f3",
        adjust: "0x6108ad8061000e6000396108bb566000610b1f537c01000000000000000000000000000000000000000000000000000000006000350463aa23115d811415610225576024356040526044356060526064600435808060200260200159905901600090528181526020810190509050608052806020028260805137806020028201915050506040516002028080602002602001599059016000905281815260208101905090506000608051516001602060805103515b808212156100d5578282602002608051015112156100ca5781602002608051015192505b6001820191506100a6565b82905090509050121561012e57608051516001602060805103515b8082121561011f578282602002608051015112156101145781602002608051015192505b6001820191506100f0565b82905090509050600003610173565b608051516001602060805103515b8082121561016b578282602002608051015112156101605781602002608051015192505b60018201915061013c565b829050905090505b608051516001602060805103515b808212156101b0578282602002608051015113156101a55781602002608051015192505b600182019150610181565b8290509050905060005b6040518112156101e1578281602002608051015101816020028501526001810190506101ba565b5b8481121561020b57816040518203602002608051015103816020028501526001810190506101e2565b848060208603526020602087020160208603f35050505050505b6398a544e58114156106695760843560405260a43560605260c46004358080602002602001599059016000905281815260208101905090506103a05280602002826103a05137806020028201915050602435808060200260200159905901600090528181526020810190509050610400528060200282610400513780602002820191505060443580806020026020015990590160009052818152602081019050905061046052806020028261046051378060200282019150506064358080602002602001599059016000905281815260208101905090506104c05280602002826104c05137806020028201915050506020610460510351600060005b8281121561037b57600081602002610460510151121561034d5780602002610460510151600003610358565b806020026104605101515b816020026104605101528060200261046051015182019150600181019050610321565b82806020026020015990590160009052818152602081019050905060005b848112156103ca57836801000000000000000082602002610460510151020581602002830152600181019050610399565b81905090509050905090506104605260605160030280806020026020015990590160009052818152602081019050905060206103a0510351600060005b82811215610461576000816020026103a0510151121561043357806020026103a051015160000361043e565b806020026103a05101515b816020026103a0510152806020026103a051015182019150600181019050610407565b82806020026020015990590160009052818152602081019050905060005b848112156104b0578368010000000000000000826020026103a051015102058160200283015260018101905061047f565b81905090509050905090506020610400510351600060005b828112156105225760008160200261040051015112156104f457806020026104005101516000036104ff565b806020026104005101515b8160200261040051015280602002610400510151820191506001810190506104c8565b82806020026020015990590160009052818152602081019050905060005b8481121561057157836801000000000000000082602002610400510151020581602002830152600181019050610540565b819050905090509050905060006060516002025b60605182121561064e5760005b604051811215610642578260605182020168010000000000000000816020026104c051015183602002610460510151020584602002880151018460200288015268010000000000000000816020026104c0510151836020028801510205606051850160200288015101606051850160200288015268010000000000000000816020026104c05101518360200287015102058385016020028801510183850160200288015250600181019050610592565b50600182019150610585565b858060208703526020602088020160208703f3505050505050505b637fab29c08114156108ab5760c43560405260e43560605261010460043580806020026020015990590160009052818152602081019050905061088052806020028261088051378060200282019150506024358080602002602001599059016000905281815260208101905090506108e05280602002826108e0513780602002820191505060443580806020026020015990590160009052818152602081019050905061094052806020028261094051378060200282019150506064358080602002602001599059016000905281815260208101905090506103a05280602002826103a05137806020028201915050608435808060200260200159905901600090528181526020810190509050610400528060200282610400513780602002820191505060a435808060200260200159905901600090528181526020810190509050608052806020028260805137806020028201915050506000600060005b606051811215610851576801000000000000000081602002610880510151826020026108e05101510382602002610880510151836020026108e051015103020583019250680100000000000000008160200261088051015182602002610940510151038260200261088051015183602002610940510151030205820191506001810190506107c8565b508082036040518060200260200159905901600090528181526020810190509050600082131515610887576103a051905061088e565b6104005190505b60405180602083035260206020604051020160208303f350505050505b505b6000f3",
        resolve: "0x610dee8061000e600039610dfc56600061107f537c010000000000000000000000000000000000000000000000000000000060003504633f8df0c481141561054a5760443560405260643560605260846004358080602002602001599059016000905281815260208101905090506080528060200282608051378060200282019150506024358080602002602001599059016000905281815260208101905090506101205280602002826101205137806020028201915050506020610120510351600060005b828112156101115760008160200261012051015112156100e357806020026101205101516000036100ee565b806020026101205101515b8160200261012051015280602002610120510151820191506001810190506100b7565b82806020026020015990590160009052818152602081019050905060005b848112156101605783680100000000000000008260200261012051015102058160200283015260018101905061012f565b819050905090509050905061012052604051806020026020015990590160009052818152602081019050905060005b6040518112156101b557806020026101205101518160200283015260018101905061018f565b5060006020608051035180806020026020015990590160009052818152602081019050905060005b82811215610223576000816020026080510151121561020757806020026080510151600003610211565b8060200260805101515b816020028301526001810190506101dd565b8190509050905051600160206020608051035180806020026020015990590160009052818152602081019050905060005b8281121561029a576000816020026080510151121561027e57806020026080510151600003610288565b8060200260805101515b81602002830152600181019050610254565b8190509050905003515b808212156103b15782826020026020608051035180806020026020015990590160009052818152602081019050905060005b8281121561031c57600081602002608051015112156103005780602002608051015160000361030a565b8060200260805101515b816020028301526001810190506102d6565b81905090509050015113156103a657816020026020608051035180806020026020015990590160009052818152602081019050905060005b8281121561039a576000816020026080510151121561037e57806020026080510151600003610388565b8060200260805101515b81602002830152600181019050610354565b81905090509050015192505b6001820191506102a4565b829050905090501415156104d75760208103516020820351600060005b828112156103ec5780602002850151820191506001810190506103ce565b819050905090500560005b6040518112156104265781816020028401518260200260805101510205816020028401526001810190506103f7565b50506020810351600060005b8281121561047d5760008160200285015112156104585780602002840151600003610460565b806020028401515b816020028501528060200284015182019150600181019050610432565b82806020026020015990590160009052818152602081019050905060005b848112156104c95783680100000000000000008260200288015102058160200283015260018101905061049b565b819050905090509050905090505b604051806020026020015990590160009052818152602081019050905060005b60405181121561052e57600a6009826020026101205101510205600a826020028501510501816020028301526001810190506104f7565b5060405180602083035260206020604051020160208303f35050505b63176802a0811415610dec5760a43560405260c43560605260e460043580806020026020015990590160009052818152602081019050905061072052806020028261072051378060200282019150506024358080602002602001599059016000905281815260208101905090506107a05280602002826107a05137806020028201915050604435808060200260200159905901600090528181526020810190509050610800528060200282610800513780602002820191505060643580806020026020015990590160009052818152602081019050905061086052806020028261086051378060200282019150506084358080602002602001599059016000905281815260208101905090506108c05280602002826108c05137806020028201915050506060516002026060518060200260200159905901600090528181526020810190509050606051806020026020015990590160009052818152602081019050905060005b606051811215610b78576001816020026108005101511415610b1e57604051806020026020015990590160009052818152602081019050905060005b60405181121561071957606051810283016020026107a0510151816020028301526001810190506106ed565b506020810351600060026020610720510351600060005b82811215610751578060200261072051015182019150600181019050610730565b819050905090500560005b85602002610a805101518112156107eb57818160200261072051015113156107e05760206107205103516107205151600060015b838112156107c657828160200261072051015113156107bb5780602002610720510151610b20528091505b600181019050610790565b81905090509050905080602002860151610b605250600192505b60018101905061075c565b506000821415610b075760208403516020610720510351602086035101806020026020015990590160009052818152602081019050905060206020870351028082828960006004600a8705601201f161084057fe5b5060206020610720510351028060206020890351028301826107205160006004600a8705601201f161086e57fe5b5080905081806020026020015990590160009052818152602081019050905060006000600060006000600060008752600189036020880152600195505b6000861215156109f9578560200287015194506001860360200287015193506002860395508460200288015192506001840391508390505b6001850381131515610954578281602002890151131515610949576001820191508160200288015181602002890151836020028a015280826020028a0152508882016020028801518982016020028901518a84016020028a0152808a83016020028a0152505b6001810190506108e3565b6001820160200288015185602002890151600184016020028a015280866020028a01525060018983010160200288015189860160200289015160018b8501016020028a0152808a87016020028a015250838213156109c957836001870160200288015281600287016020028801526002860195505b846002830112156109f457600282016001870160200288015284600287016020028801526002860195505b6108ab565b8790509050905090509050905090509050905083806020026020015990590160009052818152602081019050905084806020026020015990590160009052818152602081019050905060005b86811215610a7657806020028401518160200284015286810160200284015181602002830152600181019050610a45565b50600060005b8582131515610a9e576001810190506001810360200283015182019150610a7c565b6001810360200283015182039150630119799860008784031215610ac757868303600003610acb565b8683035b1215610af257600260018203602002850151600283036020028601510105610b6052610b01565b60018103602002840151610b60525b50505050505b610b60519050905090508260200284015250610b6d565b60005b604051811215610b6b5768010000000000000000826060518302016020026107a0510151826020026107205101510205826020028401510182602002840152600181019050610b21565b505b6001810190506106b1565b50606051806020026020015990590160009052818152602081019050905060005b606051811215610c33576001816020026108005101511415610bc8578060200283015181602002830152610c28565b68016666666666666667816020028401511215610bee5768010000000000000000610c20565b68019999999999999999816020028401511315610c145768020000000000000000610c1f565b680180000000000000005b5b816020028301525b600181019050610b99565b5060005b606051811215610cac576001816020026108005101511415610c9257806020026108c051015168010000000000000000826020026108c051015183602002610860510151038360200285015102050181602002850152610ca1565b80602002820151816020028501525b600181019050610c37565b50606051806020026020015990590160009052818152602081019050905060005b606051811215610d795760005b604051811215610d6d576301197998600083602002860151606051840285016020026107a0510151031215610d295782602002850151606051830284016020026107a051015103600003610d42565b82602002850151606051830284016020026107a0510151035b1215610d6257806020026107205101518260200284015101826020028401525b600181019050610cda565b50600181019050610ccd565b50600060005b606051811215610dcc576000816020028401511215610da75780602002830151600003610daf565b806020028301515b816020028401528060200283015182019150600181019050610d7f565b5060605180602087035260206020606051020160208703f3505050505050505b505b6000f3",
        payout: "0x6103808061000e60003961038e5660006104bf537c01000000000000000000000000000000000000000000000000000000006000350463616d333b81141561037e5760643560405260843560605260a46004358080602002602001599059016000905281815260208101905090506080528060200282608051378060200282019150506024358080602002602001599059016000905281815260208101905090506101205280602002826101205137806020028201915050604435808060200260200159905901600090528181526020810190509050610180528060200282610180513780602002820191505050606051806020026020015990590160009052818152602081019050905060005b60605181121561017b5760005b60405181121561015657680100000000000000008260605183020160200261018051015182602002610120510151020582602002840151018260200284015260018101905061010c565b50806020028201516801000000000000000003816020028301526001810190506100ff565b50604051806020026020015990590160009052818152602081019050905060005b60405181121561020857600060005b6060518112156101e4576040599059016000905260018152816060518502016020820152602081019050820191506001810190506101ab565b6060518205680100000000000000000383602002850152505060018101905061019c565b600060005b60605181121561022d57806020028501518201915060018101905061020d565b506060518105680100000000000000000360405180602002602001599059016000905281815260208101905090506020850351600060005b828112156102b057600081602002890151121561028b5780602002880151600003610293565b806020028801515b816020028901528060200288015182019150600181019050610265565b82806020026020015990590160009052818152602081019050905060005b848112156102fc578368010000000000000000826020028c01510205816020028301526001810190506102ce565b819050905090509050905060005b60405181121561035d57680100000000000000008468010000000000000000038260200261012051015102056801000000000000000085836020028501510205018160200284015260018101905061030a565b5060405180602084035260206020604051020160208403f350505050505050505b505b6000f3"
    },
    signature: {
        ten: [{
            "name": "ten()",
            "type": "function",
            "inputs": [],
            "outputs": [{ "name": "out", "type": "int256" }]
        }],
        mul2: [{
            "name": "double(int256)",
            "type": "function",
            "inputs": [{ "name": "v", "type": "int256" }],
            "outputs": [{ "name": "out", "type": "int256" }]
        }],
        info: [],
        cash: [{
            "name": "addCash(int256,int256)",
            "type": "function",
            "inputs": [{ "name": "ID", "type": "int256" }, { "name": "amount", "type": "int256" }],
            "outputs": [{ "name": "out", "type": "int256" }]
        }, {
            "name": "balance(int256)",
            "type": "function",
            "inputs": [{ "name": "address", "type": "int256" }],
            "outputs": [{ "name": "out", "type": "int256" }]
        }, {
            "name": "faucet()",
            "type": "function",
            "inputs": [],
            "outputs": [{ "name": "out", "type": "int256" }]
        }, {
            "name": "send(int256,int256)",
            "type": "function",
            "inputs": [{ "name": "recver", "type": "int256" }, { "name": "value", "type": "int256" }],
            "outputs": [{ "name": "out", "type": "int256" }]
        }, {
            "name": "sendFrom(int256,int256,int256)",
            "type": "function",
            "inputs": [{ "name": "recver", "type": "int256" }, { "name": "value", "type": "int256" }, { "name": "from", "type": "int256" }],
            "outputs": [{ "name": "out", "type": "int256" }]
        }, {
            "name": "subtractCash(int256,int256)",
            "type": "function",
            "inputs": [{ "name": "ID", "type": "int256" }, { "name": "amount", "type": "int256" }],
            "outputs": [{ "name": "out", "type": "int256" }]
        }],
        interpolate: [],
        center: [],
        score: [],
        adjust: [],
        resolve: [],
        payout: []
    }
};

// test drive!
test_ethrpc(addr, contracts, gas);

// load consensus on chain
broadcast(addr.jack, contracts.compiled, gas);

// are contracts loaded yet?
ping(addr)
